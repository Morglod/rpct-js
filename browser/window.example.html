<!DOCTYPE html>
<html>
    <body>
        <script src="./rpct.min.js"></script>
        <iframe id="target" src="./window.frame.html"></iframe>
        <script>
            setTimeout(() => {
                RPCT.DefaultConfig.debug = true;

                var frame = document.getElementById('target');
                var wstream = RPCT.createWindowWriteStream(frame.contentWindow);
                var rstream = RPCT.createWindowReadStream(window).stream;
                var streamTransport = new RPCT.StreamTransport(rstream, wstream, undefined, 'local');
                var api = new RPCT.Api({}, streamTransport);
                
                api.callMethod(
                    'remoteSum',    // Remote api method
                    10,             // argument `a`
                    20,             // argument `b`
                    sumResult => console.log('sum:', sumResult),    // argument `sumCallback`
                    mulResult => console.log('mul:', mulResult)     // argument `mulCallback`
                );
            }, 2000);
        </script>
    </body>
</html>